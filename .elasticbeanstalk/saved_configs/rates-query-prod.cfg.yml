AWSConfigurationTemplateVersion: 1.1.0.0
EnvironmentTier:
  Type: Standard
  Name: WebServer
SolutionStack: 64bit Amazon Linux 2016.03 v2.1.0 running Docker 1.9.1
EnvironmentConfigurationMetadata:
  Description: Configuration for Rates-Query Production.
  DateCreated: '1461754412000'
  DateModified: '1461754412000'
Tags:
  Application: RatePlans
  Name: RatePlans EB RatesQuery
  Operating System: Amazon Linux
  PowerMGMT: 24x7
  ProjectCode: a208ab
  Service: Node.JS
OptionSettings:
  AWSEBAutoScalingScaleDownPolicy.aws:autoscaling:trigger:
    LowerBreachScaleIncrement: '-1'
  AWSEBAutoScalingScaleUpPolicy.aws:autoscaling:trigger:
    UpperBreachScaleIncrement: '1'
  AWSEBCloudwatchAlarmHigh.aws:autoscaling:trigger:
    UpperThreshold: '90000'
  AWSEBCloudwatchAlarmLow.aws:autoscaling:trigger:
    BreachDuration: '5'
    EvaluationPeriods: '1'
    LowerThreshold: '60000'
    MeasureName: RequestCount
    Period: '5'
    Statistic: Sum
    Unit: Count
  aws:autoscaling:asg:
    Availability Zones: Any
    Cooldown: '360'
    MaxSize: '12'
    MinSize: '8'
  aws:autoscaling:launchconfiguration:
    BlockDeviceMappings: /dev/xvdcz=:12:true:gp2
    EC2KeyName: Prod-RatePlans
    IamInstanceProfile: aws-elasticbeanstalk-ec2-role
    ImageId: ami-9bef69e8
    InstanceType: t2.medium
    MonitoringInterval: 5 minute
    SSHSourceRestriction: tcp,22,22,172.31.141.5/32
    SecurityGroups: sg-34036f51,sg-bb8c02de,sg-0ae2756f,sg-39e1765c,sg-e77ec380
  aws:autoscaling:updatepolicy:rollingupdate:
    MaxBatchSize: '2'
    MinInstancesInService: '6'
    PauseTime: null
    RollingUpdateEnabled: 'true'
    RollingUpdateType: Health
    Timeout: PT10M
  aws:ec2:vpc:
    VPCId: vpc-2d1cd148
    AssociatePublicIpAddress: 'false'
    ELBScheme: public
    ELBSubnets: subnet-58ee523d,subnet-771ee02e,subnet-f7fd5880
    Subnets: subnet-58e82901,subnet-652fab00,subnet-ffe04c88
  aws:elasticbeanstalk:application:
    Application Healthcheck URL: /health
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: aws-production
    WORKER_COUNT: 2
  aws:elasticbeanstalk:command:
    BatchSize: '2'
    BatchSizeType: Fixed
    IgnoreHealthCheck: 'false'
    Timeout: '600'
  aws:elasticbeanstalk:control:
    DefaultSSHPort: '22'
    LaunchTimeout: '0' 
    LaunchType: Migration
    RollbackLaunchOnFailure: 'false'
  aws:elasticbeanstalk:environment:
    EnvironmentType: LoadBalanced
    ServiceRole: aws-elasticbeanstalk-service-role
  aws:elasticbeanstalk:healthreporting:system:
    ConfigDocument:
      CloudWatchMetrics:
        Environment:
          ApplicationRequests5xx: 60
          ApplicationRequests4xx: 60
          ApplicationRequests2xx: 60
          ApplicationRequestsTotal: 60
          ApplicationLatencyP90: 60
          InstancesDegraded: 60
          InstancesWarning: 60
          InstancesSevere: 60
          InstancesOk: 60
        Instance:
          ApplicationRequestsTotal: 60
          ApplicationRequests5xx: 60
          ApplicationLatencyP90: 60
          ApplicationRequests2xx: 60
          ApplicationRequests4xx: 60
          CPUSystem: 60
      Version: 1
    HealthCheckSuccessThreshold: Ok
    SystemType: enhanced
  aws:elasticbeanstalk:hostmanager:
    LogPublicationControl: 'true'
  aws:elasticbeanstalk:managedactions:
    ManagedActionsEnabled: 'false'
  aws:elasticbeanstalk:managedactions:platformupdate:
    InstanceRefreshEnabled: 'false'
  aws:elasticbeanstalk:monitoring:
    Automatically Terminate Unhealthy Instances: 'true'
  aws:elasticbeanstalk:sns:topics:
    Notification Protocol: sqs
    Notification Endpoint: arn:aws:sqs:eu-west-1:308867920639:rates-query
    Notification Topic Name: rates-query
  aws:elb:healthcheck:
    HealthyThreshold: '3'
    Interval: '10'
    Target: HTTP:80/health
    Timeout: '5'
    UnhealthyThreshold: '5'
  aws:elb:listener:80:
    InstancePort: '80'
    InstanceProtocol: HTTP
    ListenerEnabled: 'true'
    ListenerProtocol: HTTP
  aws:elb:loadbalancer:
    CrossZone: 'true'
    LoadBalancerHTTPPort: '80'
    LoadBalancerHTTPSPort: 'OFF'
    LoadBalancerPortProtocol: HTTP
    LoadBalancerSSLPortProtocol: HTTPS
    SecurityGroups: sg-28e1764d
  aws:elb:policies:
    ConnectionDrainingEnabled: 'true'
    ConnectionDrainingTimeout: '20'
    ConnectionSettingIdleTimeout: '60'
